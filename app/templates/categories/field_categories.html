{% extends 'base.html' %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link href="/static/css/all_document.css" rel="stylesheet">
{% endblock %}

{% block app_content %}
<div class="justify-content-center" style="width:100vw; position:relative; top:70px;">
    <div class="container mt-3">
        <h3>Quản trị mạng</h3>   
        <h4 class="mt-1">Mới thêm gần đây</h4>
        <div id="carouselNewControls" class="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item active" onclick="openDocumentDetail(11)">
                    <div class="card">
                        <div class="img-wrapper">
                            <div style="width: 140px; height:174px;position: absolute;top: 24px">
                                <img src="/static/images/anh11.png" class="d-block img-detail" alt="...">
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Tên tài liệu</h5>
                            <p class="card-text">Được thêm bởi Đàm Thu Hằng</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex bd-highlight">
                                <div class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>100%</span></div>
                                <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" onclick="clickPrevNewDoc()">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" onclick="clickNextNewDoc()">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <h4 class="mt-3">Khám phá thêm về Quản trị mạng</h4>
        <div id="all_document" class="d-flex bd-highlight flex-wrap">
            {% for document in documents.items %}
            <div class="carousel-item mb-5" onclick="openDocumentDetail('{{document[0].id}}')">
                <div class="card">
                    <div class="img-wrapper"><div style="width: 140px; height:174px;position: absolute;top: 24px"><img src="{{ document[0].image }}" class="d-block img-detail" alt="..."> </div></div>
                    <div class="card-body">
                        <h5 class="card-title">{{ document[0].document_name | get_only_document_name }}</h5>
                        <p class="card-text">Được thêm bởi {{ document[1] }}</p>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex bd-highlight">
                            <div id="save_doc_{{ document[0].id }}" class="p-2 flex-grow-1 bd-highlight"><i class="bi bi-bookmark"></i></div>
                            <div class="p-2 bd-highlight"><i class="bi bi-hand-thumbs-up"></i><span>{{ document[0].evaluate | count_evaluate }}%</span></div>
                            <div class="p-2 bd-highlight"><i class="bi bi-download"></i><span>{{ document[0].download_count }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    var scrollPosition = 0;

    function clickPrevNewDoc(){
        var cardWidth = document.querySelector("#carouselNewControls .carousel-item").clientWidth;

        if (scrollPosition > 0) {
            scrollPosition -= cardWidth;
            document.querySelector("#carouselNewControls .carousel-inner").scrollTo({
                    left: scrollPosition,
                    behavior: "smooth",
                });
        }
    }

    function clickNextNewDoc(){
        var carouselWidth = document.querySelector("#carouselNewControls .carousel-inner").scrollWidth;
        var cardWidth = document.querySelector("#carouselNewControls .carousel-item").clientWidth;

        if (scrollPosition < carouselWidth - cardWidth * 4) {
            scrollPosition += cardWidth;
            document.querySelector("#carouselNewControls .carousel-inner").scrollTo({
                    left: scrollPosition,
                    behavior: "smooth",
                });
        }
    }


</script>
{% endblock %}